var worker = new SharedWorker("sharedWorker.js");
var tabno = window.location.pathname.substring(1);   
var portNo = window.location.port;
let str = '';
worker.port.onmessage = function(e) { 
    if(e.data.msg == "close the tab") {
        close();
    } else if(e.data.msg == "processComponents"){
        var details =  e.data;
        var comp=document.createElement("div");
        comp.innerHTML = details.content;
        document.body.appendChild(comp);  
        str = 'componentName : '+details.componentName+' ';            
        getDynamicNodes(details.componentName);
    } else if(e.data.msg == ""){
        worker.port.postMessage({msg:"getNewComponents",portNo:portNo,tabno : tabno});
    }
};
worker.port.start(); 
if(tabno == '') {  
    worker.port.postMessage({msg:"firstTime",portNo:portNo,tabno : tabno});
} else {
    worker.port.postMessage({msg:"message",portNo:portNo,tabno : tabno});
}
