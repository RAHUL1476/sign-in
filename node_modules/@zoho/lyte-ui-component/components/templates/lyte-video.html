<template tag-name="lyte-video">
    <div class="lyteVideoContainer lyteVideoControlsShow" onpointerenter="{{action('mouseEnter',event)}}" onpointerleave="{{action('mouseLeave', event)}}" onpointermove="{{action('mouseMove',event)}}"  >
        <div class="lyteVideoAnimateWrapper lyteVideoAnimateBackward">
			<span class="lyteVideoAnimateBackArrow lyteVideoAnimateArrow3"></span>
			<span class="lyteVideoAnimateBackArrow lyteVideoAnimateArrow2"></span>
			<span class="lyteVideoAnimateBackArrow lyteVideoAnimateArrow1"></span>
        </div>
        <div class="lyteVideoAnimateWrapper lyteVideoAnimatePlay">
            <span class="lyteVideoAnimatePauseIcon"></span>
        </div>
        <div class="lyteVideoAnimateWrapper lyteVideoAnimateForward">
			<span class="lyteVideoAnimateForwardArrow lyteVideoAnimateArrow1"></span>
			<span class="lyteVideoAnimateForwardArrow lyteVideoAnimateArrow2"></span>
			<span class="lyteVideoAnimateForwardArrow lyteVideoAnimateArrow3"></span>
        </div>
        <canvas class="lyteVideoPoster" onclick="{{action('clickOnVideo')}}"></canvas>
        <video  class="lyteVideo"  onvolumechange="{{action('changeVolume',event)}}" preload="{{ltPropPreLoad}}" crossorigin="{{ltPropCrossOrigin}}"  ontimeupdate="{{action('update',event)}}"  onloadeddata="{{action('progress', event)}}" onprogress="{{action('progress', event )}}" onloadedmetadata="{{action('meta', event)}}" onpause="{{action('pause', event )}}" onplay="{{action('play', event )}}" onclick="{{action('clickOnVideo')}}"  ondblclick="{{action('toggleFullScreen')}}">
            <source src="{{ltPropSource[0].src}}" type="{{ltPropSource[0].type}}" label="{{ltPropSource[0].label}}" size="{{ltPropSource[0].size}}" >
            <% if( ltPropTracks ) { %>
                <track> 
            <% } %>
        </video>
        <% if( subtitles ) { %>
            <div class="lyteVideoSubtitleWrapper">
                <p class="lyteVideoSubtitle">{{subText}}</p>
            </div>
        <% } %>
        <div class="lyteVideoControls hoverControls">
            <div class="lyteVideoProgressWrapper">
                <div class="lyteVideoProgressBar" onclick="{{action('progressClick',event)}}" onmousemove="{{action('updateToolTip',event)}}"  >
                    <div class="lyteVideoToolTip">
                        <div>
                            <p class="lyteVideoTooltipChapterName">{{toolTip.name}}</p>
                            <p class="lyteVideoTooltipCurrentTime">{{toolTip.time}}</p>
                        </div>
                    </div>
                    <% if( chaptersData ){ %>
                        <div class="lyteVideoChapterWrapper">
                        <% chaptersData.forEach( function(item, index){ %>
                            <div class="lyteVideoChapter" data-start="{{item.startTime}}" data-end="{{item.endTime}}" data-label="{{item.title}}" style="width: {{item.width}}%;">
                                <span class="lyteVideoProgressed" style="width: {{item.time}}%;" ></span>
                                <span class="lyteVideoProgressLoad" style=" width : {{item.loadedTime}}%"></span>
                            </div>
                        <% }) %>   
                        </div>
                    <% } else{ %>
                        <span class="lyteVideoProgressed" style="width: {{elapsedTime}}%;" ></span>
                        <span class="lyteVideoProgressLoad" style=" width : {{loadedTime}}%"></span>
                    <% } %>
                    <span class="lyteVideoProgressHandler"  ontouchstart="{{action('progressMouseDown',event)}}" onmousedown="{{action('progressMouseDown',event)}}"></span>
                </div>    
                <div class="lyteVideoTimer">
                        <time class="duration">{{currentDuration}}</time>
                        <span class="lyteVideoTimerSeparator">/</span>
                        <time >{{duration}}</time>
                </div>
            </div>
            
            <div class="lyteVideoIconsWrap">
                <div class="lyteVideoPlayPauseIconWrap">
                    <button class="lyteVideoIcons lyteVideoPlayIcon lyteVideoPaused" onclick="{{action('togglePlayPause',this)}}"></button>
                </div>
                <div class="lyteVideoRewind">
					<button class="lyteVideoIcons lyteVideoRewindIcon" lt-prop-title="Backward" onclick="{{action('skipVideo','rewind')}}"></button>
				</div>
				<div class="lyteVideoForward">
					<button class="lyteVideoIcons lyteVideoForwardIcon" lt-prop-title="Forward" onclick="{{action('skipVideo','forward')}}"></button>
				</div>
				<div class="lyteVideoVolumeControls">
					<span class="lyteVideoVolumeIcon" onclick="{{action('mute',this)}}"></span>
					<div class="lyteVideoVolumeSlider">
						<lyte-multislider lt-prop-max = '1' lt-prop-yield=true lt-prop-handler='lyteCircle' lt-prop-value = '[ { "value" : {{volume}}, "min" : 0, "max" : 1 } ]' on-change="{{method('setVolume')}}"></lyte-multislider>
					</div>
				</div>
				<div class="lyteVideoSettings">
					<button class="lyteVideoIcons lyteVideoSettingsIcon" lt-prop-title="Settings" onclick="{{action('toggleSettings',event)}}"></button>
				</div>
                <% if( isNotFirefox ){ %>
				<div class="lyteVideoPip">
					<button class="lyteVideoIcons lyteVideoPipIcon" lt-prop-title="Play Picture in Picture" onclick="{{action('togglePip')}}"></button>
				</div>
                <% } %>
				<div class="lyteVideoFullScreenControl">
					<button class="lyteVideoIcons lyteVideoFullScreen" lt-prop-title="Full Screen" onclick="{{action('toggleFullScreen',this)}}"></button>
				</div>
            
            </div>
        </div>
        
        <div class="lyteVideoSettingsWrapper lyteVideoSettingsItemHover  lyteVideoMenuHide" onmouseover="{{action('mouseOver')}}">
            <% if( subMenuOpened ){ %>
				<div data-value = "back" class="lyteVideoSettingsDropdownHead" onclick="{{action('settingsMenuClick',this)}}" >
					<div class="lyteVideoSettingsBackIcon"></div>
					<span class="lyteVideoSettingsLabel">{{selectedOption }} </span>
				</div>
        <% } %>
    
        <% switch( selectedOption ){ 
            case 'speed' : 
            speedData.forEach( function( item, index ){ %>
            <div data-value = {{item.label}} class="lyteVideoSettingDropItem lyteVideoPl-40 {{lyteUiSetSelectedClass(item.label, ltPropPlayRate)}}" onclick="{{action('settingsMenuClick',this)}}" >
                <span class="lyteVideoSettingsLabel">{{item.label}} </span>
            </div>
        <%}); break;
           case 'quality' : %>
           <div data-value = "auto" class="lyteVideoSettingDropItem lyteVideoPl-40 {{lyteUiSetSelectedClass('auto', ltPropQuality)}}" onclick="{{action('settingsMenuClick',this)}}" >
            <span class="lyteVideoSettingsLabel">auto</span>
            </div>   
           <% ltPropSource.forEach( function( item, index ){ %>
            <div data-value = {{item.size}} class="lyteVideoSettingDropItem lyteVideoPl-40 {{lyteUiSetSelectedClass(item.size, ltPropQuality)}}" onclick="{{action('settingsMenuClick',this)}}" >
                <span class="lyteVideoSettingsLabel">{{item.size}} </span>
            </div>
        <%}); break; 
            case 'captions' : %>
            <div data-value = "off" class="lyteVideoSettingDropItem lyteVideoPl-40 {{lyteUiSetSelectedClass('off', ltPropCaption)}}" onclick="{{action('settingsMenuClick',this)}}" >
                <span class="lyteVideoSettingsLabel">off</span>
            </div> 
            <% ltPropTracks.forEach( function( item, index ){ %>
            <div data-value = {{item.label}} class="lyteVideoSettingDropItem lyteVideoPl-40 {{lyteUiSetSelectedClass(item.label, ltPropCaption)}}" onclick="{{action('settingsMenuClick',this)}}" >
                <span class="lyteVideoSettingsLabel">{{item.label}} </span>
            </div> 
        <%}); break;
            default : %>
            <div data-value="Subtitles/CC" class="lyteVideoSettingsItem " onclick="{{action('settingsMenuClick',this)}}">
                <span class="lyteVideoSettingsLabel">Subtitles/CC </span>
                <span class="lyteVideoSettingsKey">{{ltPropCaption}}</span>
            </div> 
            <div data-value="Playback Speed" class="lyteVideoSettingsItem" onclick="{{action('settingsMenuClick',this)}}">
                <span class="lyteVideoSettingsLabel">Playback Speed </span>
                <span class="lyteVideoSettingsKey">{{ltPropPlayRate}}</span>
            </div>
            <div data-value="Quality" class="lyteVideoSettingsItem" onclick="{{action('settingsMenuClick',this)}}">
                <span class="lyteVideoSettingsLabel">Quality </span>
                <span class="lyteVideoSettingsKey">{{ltPropQuality}}</span>
            </div> 
            <% } %>        
        </div>
    </div>
    <div>
    </div>
</template>